<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->

<style>

@import url('https://fonts.googleapis.com/css2?family=Russo+One&display=swap');

/*
  Sépare l'entete du reste
*/
.wrapperPrincipal{
  display: grid;
  grid-row: auto;
  height:100%;
}
header{
  grid-row: 1;
  background: linear-gradient(to top right, #A02921 , #80201A);
  border:solid 1px #80201A;
  color:WHITE;
}
#wrapMenu{
  grid-row: 2/20;
  background-image: url("https://www.pieuvre.ca/wp-content/uploads/2020/03/superman-red-son.jpg");
  height:100%;
}

/*
Sépare les différentes div du header
*/

.wrapperHeader{
  display: grid;
}
#monde{
  grid-column:1;
}
#logo-monde{
  position:absolute;
  margin:10px;
  width:12%;
  height:auto;
  overflow: visible;
}
#nom-monde{
  position:absolute;
  top:25%;
  left:11px;
  text-align:center;
  background-color: #BC0000;
  padding:3px;
  color:WHITE;
}
#profil{
  grid-column:2;
}
#portefeuille{
  grid-column: 3;
}
#autre{
  grid-column: 4;
}


/*
Sépare menu du corps
*/
.wrapperCorps{
  display: grid;
  grid-gap: 10px;
  grid-template-columns:none;
}
#menu{
  grid-column: 1;
}
#corps{
  grid-column: 2 / 9;
}


/*
Sépare les différents boutons
*/
.wrapperMenu{
  position:relative;
  top:30%;
  display: grid;
  grid-gap: 10px;
  height:50%;
}

.menu-buttons{
  margin:4px;
  grid-row: auto;
  background-color: #A02921;
  font-family: 'Russo One', sans-serif;
  font-size:large;
  border-radius: 0px 10px 10px 0px;
  position:relative;
  right:40px;
  color:WHITE;
  transition: transform 0.5s;
  border:solid 1px #80201A;
}
.menu-buttons:hover{
  transform: translate(30px, 0px);
  box-shadow: 1px 1px 0px #2F2F2F;
}



.icon-coco{
  width:10%;
  height:auto;
}


/*
Sépare les différents produits
*/
.wrapperProduit {
  display: grid;
  grid-template-columns:none;
  grid-gap: 10px;
  grid-auto-rows: minmax(150px, auto);
}
.case{
}
.one {
  grid-column: 1 ;
  grid-row: 1;
}
.two {
  grid-column: 1;
  grid-row: 2;
}
.three {
  grid-column: 1;
  grid-row: 3;
}
.four {
  grid-column: 2;
  grid-row: 1;
}
.five {
  grid-column: 2;
  grid-row: 2;
}
.six {
  grid-column: 2;
  grid-row: 3;
}

/*
AUTRE CSS
*/
body{
  height:100%;
  font-family: 'Russo One', sans-serif;
}
.modal {
 position: fixed; /* reste en place */
 z-index: 2; /* au dessus du reste */
 width: 500px; /* largeur */
 height: 500px; /* hauteur */
 overflow: auto; /* barre de scroll si besoin */
 border: solid;
 top:10%; /* a 10% du haut */
 left:35%; /* a 20% de la gauche */

  text-transform: capitalize;
  color:WHITE;
  font-family: 'Russo One', sans-serif;
  background-image:url("https://wallpaperaccess.com/full/1401904.jpg");
  background-size: 140%;
}
.imgManager{
  width:50px;
  height:auto;
  border-radius: 50%;
}
table{
  width:100%;
}
tr{
  width:100%;
  background-color:#A02921;
  opacity:50%;
}
tr:hover{
  opacity:100%;
}
td{
  width:20%;
}
.imgProduitManager{
  width:50px;
  height:auto;
}
#closebutton{
  position:fixed;
  top:0px;
  right:0px;
}
.imgUnlock{
  width:50px;
  height:auto;
}
.seuilDepasse{
  opacity:100%;
}


</style>

<!--
<img [attr.src]="server+world.logo" /> </span>
<span id="worldname"> {{world.name}} </span>

-->
<body>
{{test}}{{testBoolean}}{{testNumber}}
  <div class=" wrapperPrincipal">
    <header class="wrapperHeader">
      <div id="monde">
        <img id="logo-monde" src="https://www.lutte-ouvriere.org/sites/default/files/styles/body_scale/public/about/Revolution-Fist.jpg?itok=3CWxDPBG">
        <div id="nom-monde">{{world.name}}</div>
      </div>
      <div id="profil">
        <div>Nom du joueur</div>
      </div>
      <div id="portefeuille">
        Nous avons <span [innerHTML]="world.money | bigvalue"> </span> travailleurs
      </div>
      <div id="autre">
        SCORE :
        <span id="score"> {{world.score}} </span>
      </div>
    </header>
    <div id="wrapMenu" class=" wrapperCorps">
      <div id="menu" class="wrapperMenu">
        <button class="menu-buttons" (click)="showUnlocksFunc()">
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
          &nbsp;&nbsp;&nbsp;&nbsp;Unlocks&nbsp;&nbsp;&nbsp;&nbsp;
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
        </button>
        <button class="menu-buttons"
                (click)="showUpgradesFunc()">
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
          &nbsp;&nbsp;&nbsp;&nbsp;Upgrades&nbsp;&nbsp;&nbsp;&nbsp;
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
        </button>
        <button class="menu-buttons" (click)="showManagersFunc()">
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
          &nbsp;&nbsp;&nbsp;&nbsp;Leaders Supremes&nbsp;&nbsp;&nbsp;&nbsp;
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
        </button>
        <button class="menu-buttons" (click)="showAngelsFunc()">
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
          &nbsp;&nbsp;Camarades&nbsp;&nbsp;
          <img class="icon-coco"
               src="assets/etoile.png" alt="Save icon"/>
        </button>
      </div>
      <div id="corps" class=" wrapperProduit">
        <div class="case one">
          <app-product [qtmulti]="this.commutateurString" [money]="world.money" (notifyProduction)="onProductionDone($event)" (notifyAchat)="onBuy($event)" [prod]="world.products.product[0]">

          </app-product>
        </div>
        <div class="case two">
          <app-product [qtmulti]="this.commutateurString" [money]="world.money" (notifyProduction)="onProductionDone($event)" (notifyAchat)="onBuy($event)" [prod]="world.products.product[1]">

          </app-product>
        </div>
        <div class="case three">
          <app-product [qtmulti]="this.commutateurString" [money]="world.money" (notifyProduction)="onProductionDone($event)" (notifyAchat)="onBuy($event)" [prod]="world.products.product[2]">

          </app-product>
        </div>
        <div class="case four">
          <app-product [qtmulti]="this.commutateurString" [money]="world.money" (notifyProduction)="onProductionDone($event)" (notifyAchat)="onBuy($event)" [prod]="world.products.product[3]">

          </app-product>
        </div>
        <div class="case five">
          <app-product [qtmulti]="this.commutateurString" [money]="world.money" (notifyProduction)="onProductionDone($event)" (notifyAchat)="onBuy($event)" [prod]="world.products.product[4]">

          </app-product>
        </div>
        <div class="case SIX">
          <app-product [qtmulti]="this.commutateurString" [money]="world.money" (notifyProduction)="onProductionDone($event)" (notifyAchat)="onBuy($event)" [prod]="world.products.product[5]">
          </app-product>
        </div>
      </div>
      <div>

        <button (click)="changeCommu()">{{this.commutateurString}}</button>
      </div>
    </div>




    <!--MANAGER DIV-->
    <div *ngIf="showManagers" class="modal">
      <button class="closebutton" mat-raisedbutton color="primary" (click)="showManagers = !showManagers">X</button>
      <div class="titl">Quels leaders supremes vont rejoindre la mère patrie aujourd'hui ?!</div>
      <div>
        <table>
          <div *ngFor="let manager of world.managers.pallier">
            <div *ngIf="!manager.unlocked">
              <tr>
                <td>
                  <div class="managername"> {{ manager.name}} </div>
                  <img class="imgManager" [attr.src]="'http://192.168.43.80:8080/icones/'+manager.logo" />
                </td>
                <td>
                  <div class="managercible"> {{ world.products.product[manager.idcible].name }} </div>
                  <img class="imgProduitManager" [attr.src]="'http://192.168.43.80:8080/icones/'+world.products.product[manager.idcible].logo" />
                </td>
                <td>
                  <div class="managercost"> {{ manager.seuil}} </div>
                </td>
                <td>
                  <button class="hirebutton" (click)="hireManager(manager)"
                       [ngClass]="{'selectable' : (world.money >= manager.seuil)}">Engagez vous !</button>
                </td>
              </tr>
            </div>
          </div>
        </table>
      </div>
    </div>

    <!--Unlock DIV-->
    <div *ngIf="showUnlocks" class="modal">
      <button class="closebutton" mat-raisedbutton color="primary" (click)="showUnlocks = !showUnlocks">X</button>
      <div class="titl">Quels accomplissements pour mère patrie ?!</div>
      <div>
        <table>
        <div *ngFor="let product of world.products.product">
        <div *ngFor="let unlock of product.palliers.pallier">
          <div *ngIf="product.quantite<unlock.seuil">
            <tr>
              <td>
                <img class="imgUnlock"(click)="startFabrication()" [src]="'http://192.168.43.80:8080/icones/' + product.logo">
                <div > {{ unlock.name}} </div>
              </td>
              <td>
                <div > {{ unlock.seuil}} </div>
              </td>
              <td>
                <div > x {{ unlock.ratio}} </div>
                <div > {{ unlock.typeratio}} </div>
              </td>
            </tr>
          </div>
          <div *ngIf="product.quantite>=unlock.seuil">
            <tr class="seuilDepasse">
            <td>
              <img class="imgUnlock"(click)="startFabrication()" [src]="'http://192.168.43.80:8080/icones/' + product.logo">
              <div > {{ unlock.name}} </div>
            </td>
            <td>
              <div > {{ unlock.seuil}} </div>
            </td>
            <td>
              <div > x {{ unlock.ratio}} </div>
              <div > {{ unlock.typeratio}} </div>
            </td>
            </tr>
          </div>
        </div>
        </div>
        <div *ngFor="let unlock of world.allunlocks.pallier">
          <div *ngIf="!unlock.unlocked">
          <tr>
            <td>
              <div > {{ unlock.name}} </div>
            </td>
            <td>
              <div > {{ unlock.seuil}} </div>
            </td>
            <td>
              <div > x {{ unlock.ratio}} </div>
              <div > {{ unlock.typeratio}} </div>
            </td>
          </tr>
          </div>
          <div *ngIf="unlock.unlocked">
            <tr class="seuilDepasse">
              <td>
                <div > {{ unlock.name}} </div>
              </td>
              <td>
                <div > {{ unlock.seuil}} </div>
              </td>
              <td>
                <div > x {{ unlock.ratio}} </div>
                <div > {{ unlock.typeratio}} </div>
              </td>
            </tr>
          </div>
        </div>
        </table>

      </div>
    </div>

    <!--Upgrade DIV-->
    <div *ngIf="showUpgrades" class="modal">
      <div class="titl">Quels améliorations pour mère patrie ?!</div>
      <div>
        <div *ngFor="let manager of world.managers.pallier">
          <div *ngIf="!manager.unlocked" class="managerslayout">
            <div>
              <div class="logo"><img class="round" [attr.src]="server+manager.logo" /> </div>
            </div>
            <div>
              <div class="managername"> {{ manager.name}} </div>
              <div class="managercible"> {{ world.products.product[manager.idcible1].name }} </div>
              <div class="managercost"> {{ manager.seuil}} </div>
            </div>
            <div>
              <div class="hirebutton" (click)="hireManager(manager)"
                   [ngClass]="{'selectable' : (world.money >= manager.seuil)}">Hire !</div>
            </div>
          </div>
        </div>
        <button class="closebutton" mat-raisedbutton color="primary" (click)="showUpgrades = !showUpgrades">Close</button>
      </div>
    </div>



    <!--ANGELS DIV-->
    <div *ngIf="showAngels" class="modal">
      <div class="titl">Des camarades sont pret a rejoindre l'aventure !!</div>
      <div>
        <div *ngFor="let manager of world.managers.pallier">
          <div *ngIf="!manager.unlocked" class="managerslayout">
            <div>
              <div class="logo"><img class="round" [attr.src]="manager.logo" /> </div>
            </div>
            <div>
              <div class="managername"> {{ manager.name}} </div>
              <div class="managercible"> {{ world.products.product[manager.idcible1].name }} </div>
              <div class="managercost"> {{ manager.seuil}} </div>
            </div>
            <div>
              <div class="hirebutton" (click)="hireManager(manager)"
                   [ngClass]="{'selectable' : (world.money >= manager.seuil)}">Hire !</div>
            </div>
          </div>
        </div>
        <button class="closebutton" mat-raisedbutton color="primary" (click)="showAngels = !showAngels">Close</button>
      </div>
    </div>
  </div>
</body>
